# Usuage

Usuageは、静的サイトジェネレータです。

Usuageは、豆腐を揚げたもののことであり、私はそれが好きです。名前にそれ以上の意味はありません。

Tripitakaという類似のプロジェクトの後続プロジェクトです。Tripitakaを良いものにしようとする中で、いくつかのやろうとしていることの間には大きな違いがあることに気付き、なるべくパーツとレイヤに分けて管理しやすい新しいシステムを作ろうということに思い至り、新しいプロジェクトにすることにしました。

この文章は、開発途中のUsuageについて、myaosatoが理解しつつ、コードを書いていくことが出来るようにまとめられています。

myaosato、つまり私は、仕様を変更する際には、ここに明記するように心がけましょう。

## Usuageでやりたいこと

Usuageは、以下のデータを管理したり、必要に応じて変換します。変換は、概ね上から下に向かって行われます。

1. タグ付けされたテキストファイル
2. 中間データ形式
3. テンプレート
4. HTMLファイル

中間データ形式のみ永続化されず、システムが起動中にのみメモリ上に存在します。その他のものは、永続化されファイルシステム上に存在するファイルです。

Usuageは、いくつかの部分に分けて考えることが出来ます。

* タグ付けされたテキストファイルとのやり取りtext
    * テキストファイルから中間データ形式への変換
    * 中間データ形式からテキストファイルへの変換

* 中間データ形式 data
    * データをシステム上の他の仕組みに渡す。
    * データを受け取り、新しい状態の中間データ形式を保持する。
    
* テンプレートエンジンconverter
    * テンプレートの解釈
        * テンプレートエンジン用の関数
            * データの埋め込み
            * 条件分岐
            * 繰り返し処理
        * 関数定義
    * HTMLの出力

* テキストファイルの管理 manager
    * 関連付け
        * 名前とテキストファイル
        * 名前とHTMLファイル
    * HTMLファイルに変換した日時の記録
    * ファイルの更新日の取得
    * 一覧の取得
    * 条件付き一覧の取得

これらを組み合わせて、静的サイト生成を行おうというのがUsuageの試みです。例えば、

* HTMLファイルにまだ変換されていないファイルを一度にHTMLファイルに変換する。
* あるファイルがHTMLファイルに変換された時に、別のファイルも連動して自動的に更新、変換がされる。

組み合わせ方をどのように提供しておけばよいのかについて、今はまだ良いアイデアはありません。

## 用語

## 各プロジェクトのディレクトリ構成

project-dir
|--.usuage
|--project
|--text
|  |--hoge
|  |--piyo
|  |--...
|--page
|  |--hoge.html
|  |--piyo.html
|  |--...
|--template
|  |--template
|  |--otherone
|  |--...

## API Document

### TEXT

### DATA

### CONVERTER

### MANAGER 
